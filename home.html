<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>POPL Project</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>
<style>
    html,
    body {
        height: 100%;
    }
</style>

<body class="h-screen">
    <div class="text-center my-2 text-6xl">
        Quicksort
    </div>
    <div class="text-center my-2 mb-4">
        <button onclick="showCard(1)"
            class="transition duration-500 ease-in-out bg-blue-700 hover:bg-gray-900 text-white font-bold py-2 my-2 mx-2 px-8 rounded">
            The QuickSort Algorithm
        </button>
        <button onclick="showCard(2)"
            class="transition duration-500 ease-in-out bg-blue-700 hover:bg-gray-900 text-white font-bold py-2 my-2 mx-2 px-8 rounded">
            Input Array
        </button>
        <button onclick="showCard(3)"
            class="transition duration-500 ease-in-out bg-blue-700 hover:bg-gray-900 text-white font-bold py-2 my-2 mx-2 px-8 rounded">
            Pivot
        </button>
        <button onclick="showCard(4)"
            class="transition duration-500 ease-in-out bg-blue-700 hover:bg-gray-900 text-white font-bold py-2 my-2 mx-2 px-8 rounded">
            Selecting a Pivot
        </button>
    </div>
    <div id="card_1" class="flex mb-4 hidden">
        <div class="w-1/3 bg-blue-200 h-auto pb-4">
            <div class="text-center mx-2 my-2 mt-4 text-4xl">
                The Quick Sort Algorithm
            </div>
            <div class="text-justify mx-8 my-2 mt-4 text-lg">
                Quicksort is a popular divide-and-conquer algorithm, and we will attempt to build a visual description
                of the algorithm.
                We will individually document every separate atomic step as a state machine - and demonstrate the pivot
                mechanism,
                the partition mechanism, and the recursive nature of the algorithm. We will follow the algorithm with
                visual nodes
                representing numbers in a list - and progressively go through each pivot and partition step until the
                list of numbers
                is sorted.
            </div>
        </div>
        <div class="w-2/3 bg-blue-300 h-auto pb-4">
            <div class="text-center mx-2 my-2 mt-4 text-4xl">
                State Machines
            </div>
            <div class="text-left mx-2 my-2 mt-4 ml-20 text-xl">
                <ul class="list-decimal">
                    <li>Input Array Machine</li>
                    <li>Pivot Machine</li>
                    <li>Visualization using different pivots</li>
                </ul>
            </div>
        </div>
    </div>
    <div id="card_2" class="flex mb-4 hidden">
        <div class="w-1/3 bg-blue-200 h-auto pb-4">
            <div class="text-center mx-2 my-2 mt-4 text-4xl">
                Input Array Machine
            </div>
            <div class="text-justify mx-8 my-2 mt-4 text-lg">
                This is the input array machine. This facilitates the user to add elements to the array, and
                the quicksort algorithm demonstration can be performed on the input array. Any changes to the input
                array while
                in the quicksort procedure will be dealt with appropriately, so as to not have the user restart the
                entire
                procedure.
            </div>
        </div>
        <div class="w-2/3 bg-blue-300 h-auto pb-4">
            <div class="text-center mx-2 my-2 mt-4 text-4xl">
                Setting the input array
            </div>
            <div class="text-center">
                <input maxlength="2" type="text" name="input_array_field" id="input_array_field"
                    class="text-center text-2xl w-16 px-4 py-4 my-2">
                <button class="bg-blue-600 px-4 py-4 mx-4 text-blue-100" onclick="addElementButtonPress()"> Add
                </button>
            </div>
            <div id="invalid_input_error_message" class="text-center my-4 text-lg text-red-600 hidden">
                Please enter a number from 0 to 99.
            </div>
            <div id="here"></div>
            <div name="array_container" class="flex justify-center mt-8" id="array_container_input">
            </div>
        </div>
    </div>
    <div id="card_3" class="flex mb-4 hidden">
        <div class="w-1/3 bg-blue-200 h-auto pb-4">
            <div class="text-center mx-2 my-2 mt-4 text-4xl">
                Pivot Machine
            </div>
            <div class="text-justify mx-8 my-2 mt-4 text-lg">
                As part of the quicksort algorithm, we choose the “pivot point”. The goal is to rearrange the array such
                that all elements less than the pivot are to its left, and all elements greater than the pivot are to
                its right. The choice of the pivot point is arbitrary; In the very early versions of quicksort, the
                leftmost element of the partition would often be chosen as the pivot element. Unfortunately, this causes
                worst-case behavior on already sorted arrays, which is a rather common use-case. The problem was easily
                solved by choosing either a random index for the pivot, which we encourage the user to do.
            </div>
        </div>
        <div class="w-2/3 bg-blue-300 h-auto pb-4">
            <div class="text-center mx-2 my-2 mt-4 text-4xl">
                Select a Pivot Element
                <div class="text-center mx-2 my-2 mt-4">
                    <button id="swap"
                        class="px-2 py-2 bg-blue-700 text-white text-lg mx-8 mt-12">Swap</button>
                    <button id="break"
                        class="px-2 py-2 bg-blue-700 text-white text-lg mx-8 mt-12">Break/Part</button>
                    <button id="partition"
                        class="px-2 py-2 bg-blue-700 text-white text-lg mx-8 mt-12">Partition</button>
                    <button id="concatenate"
                        class="px-2 py-2 bg-blue-700 text-white text-lg mx-8 mt-12">Concatenation</button>
                </div>
            </div>
            <div class="text-center mx-2 my-2 mt-4 text-xl">
                <div name="array_container" class="flex justify-center mt-8" id="array_container_pivot">

                </div>
            </div>
        </div>
    </div>
    <div id="card_4" class="flex mb-4 hidden">
        <div class="w-1/3 bg-blue-200 h-auto pb-4">
            <div class="text-center mx-2 my-2 mt-4 text-4xl">
                Selecting the Best Pivot
            </div>
            <div class="text-justify mx-8 my-2 mt-4 text-lg">
                The ideal scenario is when our strategy can select a pivot that splits our input into two equal halves.
                <br>
                The worst scenario is when our pivot splits the input into <code class="bg-gray-500 px-1 py-1">1</code>
                and <code class="bg-gray-500 px-1 py-1">n-1</code> elements.
                <br/>
                <br/>
                Methods like the first element always, or the median of three (or even pseudomedian of nine as done in the JDK) strategy is deterministic and as such a poison can always be constructed to attack it. The randomized strategy makes it "impossible" to assuredly construct a poison but it comes with its own penalties (e.g good random number generation is hard to amortize). It's a trade-off.
            </div>
        </div>
        <div class="w-2/3 bg-blue-300 h-auto pb-4">
            <div class="px-4 py-4">
                <button id="sort-quick-first" class="bg-blue-800 text-white px-2 py-2">
                    Sort Using First Element as Pivot
                </button> <button disabled id="first_element_message">  </button>
                <canvas id="first_element_pivot_canvas" width="1050" height="300">
                    Your browser does not support the canvas element.
                </canvas>
            </div>
            <div class="px-4 py-4">
                <button id="sort-quick-random" class="bg-blue-800 text-white px-2 py-2">
                    Sort Using Random Element as Pivot
                </button> <button disabled id="random_element_message">  </button>
                <canvas id="random_element_pivot_canvas" width="1050" height="300">
                    Your browser does not support the canvas element.
                </canvas>
            </div>
        </div>
    </div>
</body>

<script type="text/javascript" src="home.js"></script>
<script type="text/javascript" src="sortingVisualiseFirst.js"></script>
<script type="text/javascript" src="sortingVisualiseRandom.js"></script>
<script>
    function visualise() {
        var firstElementPivotCanvas = document.getElementById("first_element_pivot_canvas");
        var firstElementPivotCanvasContext = firstElementPivotCanvas.getContext("2d");
        firstElementPivotCanvasContext.font = "30px Arial";
        console.log(currentArray)

        var pos = 50;
        for (let i = 0; i < currentArray.length; i++) {
            console.log(currentArray[i].toString())
            console.log(pos)
            firstElementPivotCanvasContext.fillText(currentArray[i].toString(), pos, 50);
            pos += 15;
        }
    }
</script>

</html>